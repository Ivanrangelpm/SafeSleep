<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SafeSleep | Cadastro</title>
    <link href="./css/style.css" rel="stylesheet" />
    <link href="./css/cadastro.css" rel="stylesheet" />
  </head>

  <body>
    <div class="header">
      <a href="index.html"><img src="./images/Logo_SafeSleep.png" alt="logo" class="logo" /></a>
      <ul class="navbar">
        <li><a href="index.html">Início</a></li>
        <li><a href="./sobreNos.html">Sobre Nós</a></li>
        <li><a class="paginaAtual" href="./cadastro.html">Cadastro</a></li>
        <li><a href="./login.html">Login</a></li>
      </ul>
    </div>
    <div id="div_cadastro" class="main">
      <div class="section cadastro-hospital">
        <div class="forms">
          <div class="form">
            <h1>Cadastre seu hospital</h1>
            <div class="inputs">
              <label>
                <span>Razão social:</span>
                <input type="text" id="input_razao" />
              </label>
              <label>
                <span>Nome fantasia:</span>
                <input type="text" id="input_fantasia" />
                <div id="div_erro_fantasia" class="error"></div>
              </label>
              <label>
                <span>CNPJ:</span>
                <input type="text" id="input_cnpj" oninput="formatar_cnpj()" />
                <div id="div_erro_cnpj" class="error"></div>
              </label>
              <label>
                <span>Email:</span>
                <input type="text" id="input_email" />
                <div id="div_erro_email" class="error"></div>
              </label>
              <label>
                <span>Telefone:</span>
                <input type="text" id="input_telefone" oninput="formatar_telefone()" />
                <div id="div_erro_telefone" class="error"></div>
              </label>
              <label>
                <span>Logradouro:</span>
                <input type="text" id="input_logradouro" />
              </label>
            </div>
          </div>
          <div class="form">
            <h1>Cadastre-se</h1>
            <div class="inputs">
              <label>
                <span>Nome Completo:</span>
                <input type="text" id="input_nome" />
                <div id="div_erro_nome" class="error"></div>
              </label>
              <label>
                <span>CPF:</span>
                <input type="text" id="input_cpf" oninput="formatar_cpf()" />
                <div id="div_erro_cpf" class="error"></div>
              </label>
              <label>
                <span>Senha:</span>
                <input type="password" id="input_senha" />
                <div id="div_erro_senha" class="error"></div>
              </label>
              <label>
                <span>Confirme sua senha:</span>
                <input type="password" id="input_confirmar"/>
                <div id="div_erro_confirmar" class="error"></div>
              </label>
              <span id="spanResponse">(A senha deve possuir pelo menos 8 <br> caracteres e um caracter especial)</span>
            </div>
          </div>
        </div>
        <button onclick="cadastrar()">Cadastrar</button>
        <div id="div_erro" class="error"></div>
      </div>
      <div class="linkRedirecionar">
        <p>Já possui um usuário? <a href="login.html">Fazer login</a></p>
      </div>
    </div>
    <div class="footer">
      <div class="developers">
        <h3>Desenvolvedores da SafeSleep:</h3>
        <ul>
          <li>Bruno Yuji Takahashi</li>
          <li>Diego Crispim dos Santos Campos</li>
          <li>Fabrício Prudente Ferreira</li>
          <li>Ivan Rangel Pestana Marcolin</li>
          <li>Lucas Tetsuo Nagasse</li>
          <li>Matheus Yukio Makiyama</li>
          <li>Renan Rocha Pacanaro</li>
        </ul>
      </div>
      <div class="contact">
        <h3>Contato:</h3>
        <ul>
          <li>safesleep@gmail.com</li>
          <li>+55 11 99999-9999</li>
        </ul>
        <img src="./images/logo.png" class="logo" />
      </div>
    </div>
  </body>
</html>

<script>
  function formatar_cnpj() {
    var cnpj = input_cnpj.value;
    var tamanho = cnpj.length;

    if (tamanho == 2 || tamanho == 6) {
      input_cnpj.value += ".";
    } else if (tamanho == 10) {
      input_cnpj.value += "/";
    } else if (tamanho == 15) {
      input_cnpj.value += "-";
    } 
  }

  function formatar_cpf() {
    var cpf = input_cpf.value;
    var tamanho = cpf.length;

    if (tamanho == 3 || tamanho == 7) {
      input_cpf.value += ".";
    } else if (tamanho == 11) {
      input_cpf.value += "-";
    } 
  }

  function formatar_telefone() {
    var telefone = input_telefone.value;
    var tamanho = telefone.length;

    if (tamanho == 2) {
      input_telefone.value += " ";
    } else if (tamanho == 8) {
      input_telefone.value += "-";
    }
  }

  function cadastrar() {
    div_erro.innerHTML = "";
    var razao = input_razao.value;
    var fantasia = input_fantasia.value;
    var cnpj = input_cnpj.value;
    var email = input_email.value;
    var telefone = input_telefone.value;
    var logradouro = input_logradouro.value;
    var nome = input_nome.value;
    var cpf = input_cpf.value;
    var senha = input_senha.value;
    var confirmar = input_confirmar.value;
    var valido = 0;

    if (razao == '' || fantasia == '' || cnpj == '' || email == '' || telefone == '' || logradouro == '' || nome == '' || cpf == '' || senha == '' || confirmar == '') {
      div_erro.innerHTML = 'É necessário preencher todos os campos!';
    } else {
      if (fantasia.length <= 1) {
        div_erro_fantasia.innerHTML = `Nome inválido`;
      } else {
        div_erro_fantasia.innerHTML = "";
        valido++;
      }
      if (cnpj.length != 18) {
        div_erro_cnpj.innerHTML = `CNPJ inválido`;
      } else {
        div_erro_cnpj.innerHTML = "";
        valido++;
      }
      if (email.indexOf('@') == -1 || email.indexOf(".") == -1) {
        div_erro_email.innerHTML = `E-mail inválido`;
      } else {
        div_erro_email.innerHTML = "";
        valido++;
      }
      if (telefone.length != 13) {
        div_erro_telefone.innerHTML = `Número de telefone inválido`;
      } else {
        div_erro_telefone.innerHTML = "";
        valido++;
      }
      if (nome.length <= 1) {
        div_erro_nome.innerHTML = `Nome inválido`;
      } else {
        div_erro_nome.innerHTML = "";
        valido++;
      }
      if (cpf.length != 14) {
        div_erro_cpf.innerHTML = `CPF inválido`;
      } else {
        div_erro_cpf.innerHTML = "";
        valido++;
      }
      if (senha.length < 8) {
        div_erro_senha.innerHTML = `Senha fraca`;
      } else if (senha.indexOf('@') < 0 && senha.indexOf('$') < 0 && senha.indexOf('#') < 0 && senha.indexOf('*') < 0 && senha.indexOf('%') < 0 && senha.indexOf('/') < 0 && senha.indexOf('_') < 0 && senha.indexOf('&') < 0) {
        div_erro_senha.innerHTML = `Senha fraca`;
      } else {
        div_erro_senha.innerHTML = "";
        valido++;
        if (senha == confirmar) {
          div_erro_confirmar.innerHTML = "";
          valido++;
        } else {
          div_erro_confirmar.innerHTML = `Confirmação de senha incorreta`;
        }
      }
    }
    if (valido == 8) {
      div_cadastro.innerHTML = '<h2 class="enviado"> Cadastro concluído! </span> <h2>';  
      div_cadastro.innerHTML += '<br> <a href="login.html"> Fazer login </a>';  
    }
  }
</script>
