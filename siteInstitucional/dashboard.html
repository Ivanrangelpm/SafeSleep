<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="./css/style.css" rel="stylesheet" />
  <link href="./css/dashboard.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
  <!-- <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script> -->
  <!-- <script src="https://www.chartjs.org/samples/latest/utils.js"></script> -->
  <title>SafeSleep | Dashboard</title>
  <style>
    canvas {
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
</head>

<body>
  <div class="header">
    <a><img src="./images/ssLogoExtended.png" alt="logo" class="logo" /></a>
    <ul class="navbar">
      <li><a href="./gerenciar.html">Gerenciar</a></li>
      <li><a class="paginaAtual" href="./dashboard.html">Incubadoras</a></li>
      <li><a class="sair" href="./index.html">Sair</a></li>
    </ul>
  </div>
  <div class="main" id="main">
    <h1>GRÁFICOS ESTATÍSTICOS - FAMÍLIA FELIZ</h1>
    <h2>Representante: Fernando Brandão</h2>
    <div class="graficos">
      <div id="sectionCanvas1">
        <section>
          <!-- <span>Temperatura das Incubadoras</span> -->
          <canvas id="temperaturaAll"></canvas>
        </section>
      </div>
      <div id="sectionCanvas2">
        <section class="cardSection">
          <!-- <span class="pieTitle">Incubadoras Disponíveis</span> -->
          <canvas id="incubadorasUso"></canvas>
        </section>
        <section class="cardSection">
          <!-- <span class="pieTitle">Bebês Vulneráveis</span> -->
          <canvas id="bebesCritico"></canvas>
        </section>
        <section class="cardSection">
          <!-- <span class="pieTitle">Taxa de Prematuridade</span> -->
          <canvas id="prematuridade"></canvas>
        </section>
      </div>
    </div>
    <div class="section" id="sectionInfos">
      <h1>Selecione as Opções Desejadas:</h1>
      <div class="opcoes">
        <button id="botaoGeral" onclick="btnGeral()">Geral</button>
        <button id="botaoRisco" onclick="btnRisco()">Em risco</button>
        <button id="botaoAlertas" onclick="btnAlertas()">Alertas</button>
      </div>
    </div>
  </div>
  <div class="chatBot" style=" width: 120px; height: 120px; position: fixed;  bottom: 40px; right: 150px;">
    <img style= " width: 120px;  border-radius: 100%;" src="images/helpDesk.jpeg" alt=""></div>
  <div class="footer">
  <button onclick="chatbot()" class="botaoChatBot" style=" width: 120px; height: 120px; position: fixed;  bottom: 40px; right: 150px; opacity: 0; border-radius: 100%; cursor: pointer;"></button>  
  
  
  <div id="divMensagem" style="border-radius: 17px; display: none; width: 300px; height: 500px; position: fixed;  bottom: 47px; right: 250px; background-color: white; border: 3px solid #30a0a0;">
    <h2 style=" color: black;">TIre suas dúvidas!</h2>
    <input style="margin-top: 400px;" placeholder="Digite aqui" type="text">
  </div>
  
    <div class="developers">
      <h3>Desenvolvedores da SafeSleep</h3>
      <ul>
        <li>Bruno Yuji Takahashi - bruno.ytakahashi@sptech.school</li>
        <li>Diego Crispim dos Santos Campos - diego.campos@sptech.school</li>
        <li>Fabricio Prudente Ferreira - fabricio.ferreira@sptech.school</li>
        <li>Ivan Rangel Pestana Marcolin - ivan.marcolin@sptech.school</li>
        <li>Lucas Tetsuo Nagasse - lucas.nagasse@sptech.school</li>
        <li>Matheus Yukio Makiyama - matheus.makiyama@sptech.school</li>
        <li>Renan Rocha Pacanaro Trinca - renan.trinca@sptech.school</li>
      </ul>
    </div>
    <div class="contact">
      <h3>Contatos</h3>
      <ul>
        <li>safesleep@gmail.com</li>
        <li>+55 11 99999-9999</li>
      </ul>
      <img src="./images/ssLogoName.png" class="logo" />
    </div>
  </div>
  <div id="alerta" class="divAviso">
    <div class="alertaBox">
      <h1>Urgente!</h1>
      <button onclick="closeAlert()">X</button>
    </div>
    <div class="alertaBox">
      <img src="./images/alert.png" alt="Alerta" class="alertaImg">
      <span id="alertText" class='alertaSpan'>
        Incubadoras com Temperatura Desregulada:
      </span>
    </div>
  </div>
</body>

</html>

<script>
  var contChatBot = 0;

  function chatbot() {
    if(contChatBot % 2 == 0){
      divMensagem.style.display = 'block';
    }else{
      divMensagem.style.display = 'none';
    }
    contChatBot ++;
  }
  /* 
    TODOS OS DADOS MOSTRADOS NOS GRÁFICOS SIMULAM UMA SITUAÇÃO EM QUE EXISTEM APENAS 4 (QUATRO) INCUBADORAS CADASTRADAS *EM USO*. 
    ESSA VARIÁVEL É USADA APENAS PARA O SELECT DOS BOTÕES "GERAL" E "RISCO" COM O OBJETIVO DE GERAR TODAS AS OPÇÕES DE INCUBADORAS ATRAVÉS DO "FOR"

    A ALTERAÇÃO DO VALOR DA VARIÁVEL ABAIXO NÃO MUDARÁ OS DADOS MOSTRADOS NOS GRÁFICOS. TODOS OS GRÁFICOS PERMANECERÃO SIMULANDO 4 INCUBADORAS
  */
  var totalIncubadoras = 4; 

  var mainContent = `
  <h1>Selecione as Opções Desejadas:</h1>
  <div class="opcoes">
    <button id="botaoGeral" onclick="btnGeral()">Geral</button>
    <button id="botaoRisco" onclick="btnRisco()">Em risco</button>
    <button id="botaoAlertas" onclick="btnAlertas()">Alertas</button>
  </div>`;


  // ========================================== DETERMINA A TEMPERATURA DAS INCUBADORAS, ALÉM DA TEMPERATURA MÍNIMA E MÁXIMA ========================================== //
  var temperatures1 = [];
  var temperatures2 = [];
  var temperatures3 = [];
  var temperatures4 = [];

  var temperatura_maxima = 37.5;
  var temperatura_minima = 34.5;

  var min_random = temperatura_minima - 1;
  var max_random = temperatura_maxima + 1;
  var intervalo = max_random - min_random;

  for (var cont = 0; cont < 7; cont++) {
    temperatures1[cont] = Math.random().toFixed(2) * intervalo + min_random;
    temperatures2[cont] = Math.random().toFixed(2) * intervalo + min_random;
    temperatures3[cont] = Math.random().toFixed(2) * intervalo + min_random;
    temperatures4[cont] = Math.random().toFixed(2) * intervalo + min_random;
  }
  
  // ========================================== DETECTA SE EXISTE ALGUM RISCO EM CADA INCUBADORA ========================================== //
  
  /* 
      OBS: O VALOR 6 ENTRE OS COLCHETES INDICA A ÚLTIMA TEMPERATURA "DETECTADA" (OU SEJA, A MAIS RECENTE).
      DESSA FORMA, COM A TEMPERATURA MAIS ATUAL, É POSSÍVEL DETERMINAR NO MOMENTO SE A CRIANÇA ESTÁ EM RISCO.
      
      É IMPORTANTE ENTENDER QUE É APENAS UMA SIMULAÇÃO. A FORMA CORRETA DE CAPTURAR OS DADOS MAIS RECENTES SERÁ
      ATRAVÉS DO BANCO DE DADOS.
      
      === VARIÁVEIS ===
      -- cont_riscoHipo & cont_riscoHiper ===> Valor int. Contagem de quantas crianças estão com chance de ter Hipotermia e quantas estão com chance de ter Hipertermia. 
      (É utilizada para o gráfico "Bebês com Risco de Saúde" e "Bebês com Risco de:" (do botão "Alertas")).

      -- risco_incubadora# ===> Valor booleano. Se verdadeiro, indicará que a criança dentro desta incubadora está com risco.
      (É utilizada para mostrar os alertas que aparece na tela)

      -- doenca_incubadora# ===> Valor string. Indica a doença que pode atingir a criança devido à temperatura desregulada.
      (É utilizada para informar se o bebê da incubadora x está com chance de ter Hipotermia ou Hipertermia)
  */
 
  var cont_riscoHipo = 0;
  var cont_riscoHiper = 0;
  var risco_incubadora1 = false;
  var risco_incubadora2 = false;
  var risco_incubadora3 = false;
  var risco_incubadora4 = false;
  var doenca_incubadora1 = "";
  var doenca_incubadora2 = "";
  var doenca_incubadora3 = "";
  var doenca_incubadora4 = "";

  //INCUBADORA 1
  if (temperatures1[6] > temperatura_maxima) { 
    risco_incubadora1 = true;
    doenca_incubadora1 = 'Hipertermia';
    cont_riscoHiper++;
  } else if (temperatures1[6] < temperatura_minima) {
    risco_incubadora1 = true;
    doenca_incubadora1 = 'Hipotermia';
    cont_riscoHipo++;
  }

  //INCUBADORA 2
  if (temperatures2[6] > temperatura_maxima) { 
    risco_incubadora2 = true;
    doenca_incubadora2 = 'Hipertermia';
    cont_riscoHiper++;
  } else if (temperatures2[6] < temperatura_minima) {
    risco_incubadora2 = true;
    doenca_incubadora2 = 'Hipotermia';
    cont_riscoHipo++;
  }

  //INCUBADORA 3
  if (temperatures3[6] > temperatura_maxima) {
    risco_incubadora3 = true;
    doenca_incubadora3 = 'Hipertermia';
    cont_riscoHiper++;
  } else if (temperatures3[6] < temperatura_minima) {
    risco_incubadora3 = true;
    doenca_incubadora3 = 'Hipotermia';
    cont_riscoHipo++;
  }

  //INCUBADORA 4
  if (temperatures4[6] > temperatura_maxima) {
    risco_incubadora4 = true;
    doenca_incubadora4 = 'Hipertermia';
    cont_riscoHiper++;
  } else if (temperatures4[6] < temperatura_minima) {
    risco_incubadora4 = true;
    doenca_incubadora4 = 'Hipotermia';
    cont_riscoHipo++;
  }


  // ========================================== MOSTRAR AVISO EM VERMELHO CASO HAJA CRIANÇAS EM RISCO ========================================== //
  var texto_dos_alertas = "";

  if (risco_incubadora1) { //Lembre-se que a variável risco_incubadora# é uma boolean (True/False)
    document.getElementById('alerta').style.display = 'flex'; //Tornar visível
    texto_dos_alertas += `<br>Incubadora Nº1 - ${doenca_incubadora1}`; //Informar a mensagem juntamente com a doença que pode infectar a criança
  }

  if (risco_incubadora2) {
    document.getElementById('alerta').style.display = 'flex';
    texto_dos_alertas += `<br>Incubadora Nº2 - ${doenca_incubadora2}`;
  }

  if (risco_incubadora3) {
    document.getElementById('alerta').style.display = 'flex';
    texto_dos_alertas += `<br>Incubadora Nº3 - ${doenca_incubadora3}`;
  }

  if (risco_incubadora4) {
    document.getElementById('alerta').style.display = 'flex';
    texto_dos_alertas += `<br>Incubadora Nº4 - ${doenca_incubadora4}`;
  }

  document.getElementById('alertText').innerHTML += texto_dos_alertas;


  // ========================================== SELECT DOS BOTÕES "GERAL" & "EM RISCO" ========================================== //
  var btnApertado = "";

  function btnGeral() { //Botão "Geral"
    btnApertado = "geral";
    showTable();
  }

  function btnRisco() { //Botão "Risco"
    btnApertado = "risco";
    showTable();
  }

  var tableContent = ""

  function showTable() { //Mostrar Select

    var listaTemperaturasAtuais = [temperatures1[6], temperatures2[6], temperatures3[6], temperatures4[6]];
    var nomeDoBebe = ['Jorge Silva', 'Hellen Monteiro', 'Lua Santos', 'Melissa Bittencourt'];

    if (btnApertado == "geral") { //Botão "Geral"
      tableContent = `
        <h2>Incubadoras</h2>
        <table>
          <tr>
            <th>Código de Série</th>
            <th>Temperatura (°C)</th>
            <th>Nome da Criança</th>
            <th>Status</th>
          </tr>`;

      for (var cont = 0; cont < totalIncubadoras; cont++) {
        if (cont % 2 == 1) var classeCor = "linhabranca";
        else var classeCor = "linhacinza";

        if (listaTemperaturasAtuais[cont] > 37.5 || listaTemperaturasAtuais[cont] < 34.5) var status_incubadora = "Perigo";
        else var status_incubadora = "Safe";
        
        tableContent += `
          <tr onclick="verificar(${cont + 1})" id='dados_incubadora'> 
            <td class = ${classeCor}> Incubadora ${cont + 1} </td> 
            <td class = ${classeCor}> ${listaTemperaturasAtuais[cont]} </td>
            <td class = ${classeCor}> ${nomeDoBebe[cont]} </td>
            <td class = ${classeCor}> ${status_incubadora} </td>
          </tr>
        `;
      }
    } 
    else { //Botão "Risco" (Vai mostrar a opção da incubadora SOMENTE SE risco_incubadora# for TRUE)
      tableContent = `
        <h2>Incubadoras</h2>
        <table>
          <tr>
            <th>Código de Série</th>
            <th>Temperatura (°C)</th>
            <th>Nome da Criança</th>
          </tr>`;

      for(var cont = 0; cont < totalIncubadoras; cont++){
        if(listaTemperaturasAtuais[cont] > 37.5 || listaTemperaturasAtuais[cont] < 34.5){
          if (cont % 2 == 1) var classeCor = "linhabranca";
          else var classeCor = "linhacinza";

          tableContent += `<tr onclick="verificar(${cont + 1})" id='dados_incubadora'> 
            <td class = ${classeCor}> Incubadora ${cont + 1} </td> 
            <td class = ${classeCor}> ${listaTemperaturasAtuais[cont]} </td>
            <td class = ${classeCor}> ${nomeDoBebe[cont]} </td>
          </tr>`;
        }
      }
    }  

    tableContent += "</table>";

    sectionInfos.innerHTML = `${mainContent}
      <hr/>${tableContent}
    `;
  //Mostrar o Select na Tela (mainContent é o conteúdo dos botões & selectContent são as opções)
    // sectionInfos.innerHTML = `${mainContent}
    // <hr/>
    // <div class="section">
    //   <h2>Selecione a incubadora para ver informações adicionais:</h2>
    //   <div class="selecao">
    //     <label>
    //       <span>Selecione a incubadora:</span>
    //       <select id="selectIncubadora" onchange="verificar()">
    //         <option value="0" selected disabled>Selecione a incubadora</option>
    //         ${selectContent}
    //       </select>
    //     </label>
    //   </div>
    // </div>`;

    if (btnApertado == "risco" && cont_riscoHiper == 0 && cont_riscoHipo == 0) {
      sectionInfos.innerHTML = `${mainContent}
      <hr>
      <div id='divResponse' class='section'>
        <h2 class='infoRisk'>Todas as crianças estão sem risco de adquirir doenças!</h2>
      </div>
      `;
    }
  }

  // ========================================== DETERMINA A TEMPERATURA DAS INCUBADORAS, ALÉM DA TEMPERATURA MÍNIMA E MÁXIMA ========================================== //

  // POR FAVOR, NÃO APAGUE AS LINHAS QUE ESTÃO EM COMENTÁRIOS! ELAS PODERÃO SER UTILIZADAS FUTURAMENTE.

  function verificar(incubadora_num) {
    var peso = 0;
    var idade = 0;
    var prematuridade = "Não";
    var dtNascBebe = "";
    // var nomeDoResponsavel = "";
    // var parentesco = "";
    // var nomeDoMedico = "";

    sectionInfos.innerHTML = `${mainContent} <hr/> ${tableContent} <hr/>
    <div id="divResponse" class="section">
      <span class='lineTitle'>Temperatura da Incubadora Nº${incubadora_num}</span>  
      <section id='lineSection'>
        <canvas id='incubadoraNum${incubadora_num}'></canvas>
      </section>
    </div>`;

    // gerarGraficoInc(
    //   `incubadoraNum${incubadora_num}`,
    //   temperatures,
    //   maxTemperatures,
    //   minTemperatures
    // );


    //Mostrar o gráfico de cada incubadora
    if (incubadora_num == '1') {
      gerarGraficoInc1();
      dtNascBebe = "01/05/2024";
    }
    else if (incubadora_num == '2') {
      gerarGraficoInc2();
      dtNascBebe = "26/04/2024";
      prematuridade = "Sim";
    }
    else if (incubadora_num == '3') {
      gerarGraficoInc3();
      dtNascBebe = "07/05/2024";
    }
    else {
       gerarGraficoInc4();
       dtNascBebe = "03/05/2024";
        
    };
  }


  // ========================================== GRÁFICOS INDIVIDUAIS ========================================== //

  //Variáveis para determinar as linhas de temperatura Máxima e Mínima nos gráficos ChartJS
  var jsonMaxLine = {
    label: 'Temperatura Máxima (°C)',
    data: [temperatura_maxima, temperatura_maxima, temperatura_maxima, temperatura_maxima, temperatura_maxima, temperatura_maxima, temperatura_maxima],
    borderWidth: 5,
    borderColor: '#19A7A8',
    backgroundColor: 'transparent',
    pointRadius: 0
  }

  var jsonMinLine = {
    label: 'Temperatura Mínima (°C)',
    data: [temperatura_minima, temperatura_minima, temperatura_minima, temperatura_minima, temperatura_minima, temperatura_minima, temperatura_minima],
    borderWidth: 5,
    borderColor: '#001725',
    backgroundColor: 'transparent',
    pointRadius: 0
  }

  var eixoXValues = ['10h', '11h', '12h', '13h', '14h', '15h', '16h'];

  /*
    Horários pré-definidos nessa variável. 

    ESSE VETOR TEM 7 HORÁRIOS, POIS TAMBÉM SIMULAMOS UMA SITUAÇÃO EM QUE O SENSOR LM35 TENHA CAPTADO A TEMPERATURA
    ENTRE 10h00 E 16h00.

    CASO HAJA NECESSIDADE DE ACRESCENTAR/RETIRAR HORÁRIOS NOVOS, DEVE-SE FAZER AS SEGUINTES ALTERAÇÕES:
    * MODIFICAR O VALOR 7 DO "FOR" (LINHA 134);
    * MODIFICAR A QUANTIDADE DE VALORES EM "data" NAS VARIÁVEIS "jsonMaxLine" (Linha 337) E "jsonMinLine" (Linha 346) --- Padrão: 7 valores
  */

  //Configuração das Legendas dos gráficos (Todos os gráficos)
  var optionsLegend = {
    display: true,
    labels: {
      font: {
        size: 15,
      },
      padding: 40
    },
    position: 'bottom'
  }

  //Configuração da Escala de horários (x) e temperaturas (y) nos gráficos individuais
  var scales = {
    x: {
      title: {
        display: true,
        text: 'Horário',
        font: {
          size: 16,
          weight: 'bold'
        }
      }
    },
    y: {
      min: min_random - 0.5,
      max: max_random + 0.5,
      title: {
        display: true,
        text: 'Temperatura (°C)',
        font: {
          size: 16,
          weight: 'bold'
        }
      },
      ticks: {
        stepSize: 1
      }
    }
  }

  // Botão "Alertas"
  function btnAlertas() {
    btnApertado = "alertas";

    if (cont_riscoHiper == 0 && cont_riscoHipo == 0) { //Se não houver nenhum tipo de risco
      sectionInfos.innerHTML = `${mainContent}
      <hr>
      <div id='divResponse' class='section'>
        <h2 class='infoRisk'>Todas as crianças estão sem risco de adquirir doenças!</h2>
      </div>
      `;
    } else { //Se houver riscos
      sectionInfos.innerHTML = `${mainContent}
        <div id='divAlertRisk' class='section'>
          <section class="cardSection">
            <canvas id='pieRisk'></canvas>
          </section>
          <div id="alertaSection">
            <h1>Urgente!</h1>
            <div class="alertaBox">
              <img src="./images/alert.png" alt="Alerta" class='alertaImg'>
              <span id="alertPieText" class='alertaSpan'>
                Incubadoras com Temperatura Desregulada:
              </span>
            </div> 
          </div>
        </div>
      `;
      document.getElementById('alertPieText').innerHTML += texto_dos_alertas;

      var divPieRisk = document.getElementById('pieRisk').getContext('2d');
      divPieRisk.canvas.width = 1;
      divPieRisk.canvas.height = 1;

      var graficoPieRisk = new Chart(
        divPieRisk,
        {
          type: 'pie',
          data: {
            labels: ['Hipotermia', 'Hipertermia'],
            datasets: [{
              data: [cont_riscoHipo, cont_riscoHiper],
              backgroundColor: [
                '#003050',
                '#19A7A8'
              ]
            }]
          },
          options: {
            plugins: {
              title: {
                display: true,
                text: 'Recém-Nascidos com Risco de:',
                font: {
                  size: 31
                },
                padding: 30
              },
              legend: optionsLegend
            }
          }
        }
      )
    }
  }

  //Gráfico Incubadora 1
  function gerarGraficoInc1() {
    var incubadoraElement = document.getElementById('incubadoraNum1').getContext('2d');
    incubadoraElement.canvas.parentNode.style.width = '100%';
    incubadoraElement.canvas.parentNode.style.height = '400px';
    incubadoraElement.canvas.width = 4;
    incubadoraElement.canvas.height = 1;

    var chartIncubadora = new Chart(
      incubadoraElement,
      {
        type: 'line',
        data: {
          labels: eixoXValues,
          datasets: [{
            label: 'Temperatura da Incubadora (°C)',
            data: temperatures1,
            borderWidth: 4,
            borderColor: '#507090',
            backgroundColor: 'transparent',
            lineTension: 0.4
          },
            //jsonMaxLine e jsonMinLine são as outras duas linhas (constantes)
            jsonMaxLine,
            jsonMinLine
          ]
        },
        options: {
          scales: scales,
          plugins: {
            legend: optionsLegend
          }
        }
      }
    )
  }

  //Gráfico Incubadora 2
  function gerarGraficoInc2() {
    var incubadoraElement = document.getElementById('incubadoraNum2').getContext('2d');
    incubadoraElement.canvas.parentNode.style.width = '100%';
    incubadoraElement.canvas.parentNode.style.height = '400px';
    incubadoraElement.canvas.width = 4;
    incubadoraElement.canvas.height = 1;

    var chartIncubadora = new Chart(
      incubadoraElement,
      {
        type: 'line',
        data: {
          labels: eixoXValues,
          datasets: [{
            label: 'Temperatura da Incubadora (°C)',
            data: temperatures2,
            borderWidth: 4,
            borderColor: '#507090',
            backgroundColor: 'transparent',
            lineTension: 0.4
          },
            //jsonMaxLine e jsonMinLine são as outras duas linhas (constantes)
            jsonMaxLine,
            jsonMinLine
          ]
        },
        options: {
          scales: scales,
          plugins: {
            legend: optionsLegend
          }
        }
      }
    )
  }

  //Gráfico Incubadora 3
  function gerarGraficoInc3() {
    var incubadoraElement = document.getElementById('incubadoraNum3').getContext('2d');
    incubadoraElement.canvas.parentNode.style.width = '100%';
    incubadoraElement.canvas.parentNode.style.height = '400px';
    incubadoraElement.canvas.width = 4;
    incubadoraElement.canvas.height = 1;

    var chartIncubadora = new Chart(
      incubadoraElement,
      {
        type: 'line',
        data: {
          labels: eixoXValues,
          datasets: [{
            label: 'Temperatura da Incubadora (°C)',
            data: temperatures3,
            borderWidth: 4,
            borderColor: '#507090',
            backgroundColor: 'transparent',
            lineTension: 0.4
          },
            //jsonMaxLine e jsonMinLine são as outras duas linhas (constantes)
            jsonMaxLine,
            jsonMinLine
          ]
        },
        options: {
          scales: scales,
          plugins: {
            legend: optionsLegend
          }
        }
      }
    )
  }

  //Gráfico Incubadora 4
  function gerarGraficoInc4() {
    var incubadoraElement = document.getElementById('incubadoraNum4').getContext('2d');
    incubadoraElement.canvas.parentNode.style.width = '100%';
    incubadoraElement.canvas.parentNode.style.height = '400px';
    incubadoraElement.canvas.width = 4;
    incubadoraElement.canvas.height = 1;

    var chartIncubadora = new Chart(
      incubadoraElement,
      {
        type: 'line',
        data: {
          labels: eixoXValues,
          datasets: [{
            label: 'Temperatura da Incubadora (°C)',
            data: temperatures4,
            borderWidth: 4,
            borderColor: '#507090',
            backgroundColor: 'transparent',
            lineTension: 0.4
          },
            //jsonMaxLine e jsonMinLine são as outras duas linhas (constantes)  
            jsonMaxLine,
            jsonMinLine
          ]
        },
        options: {
          scales: scales,
          plugins: {
            legend: optionsLegend
          }
        }
      }
    )
  }


  // ========================================== GRÁFICOS GERAIS ========================================== //
  
  //TEMPERATURA DE TODAS AS INCUBADORAS (ATUALIZADAS A CADA HORA)
  var divTemperaturaAll = document.getElementById('temperaturaAll').getContext('2d');
  divTemperaturaAll.canvas.parentNode.style.width = '100%';
  divTemperaturaAll.canvas.parentNode.style.height = '400px';
  divTemperaturaAll.canvas.width = 4;
  divTemperaturaAll.canvas.height = 1;

  var graficoTemperaturaAll = new Chart(
    divTemperaturaAll,
    {
      type: 'bar',
      data: {
        labels: ['Incubadora 1', 'Incubadora 2', 'Incubadora 3', 'Incubadora 4'],
        datasets: [{
          type: 'line',
          data: [temperatura_maxima, temperatura_maxima, temperatura_maxima, temperatura_maxima],
          backgroundColor: 'transparent',
          borderColor: '#19A7A8',
          label: 'Temperatura Máxima Permitida (°C)',
          borderWidth: 5,
          pointRadius: 0
        }, {
          type: 'line',
          data: [temperatura_minima, temperatura_minima, temperatura_minima, temperatura_minima],
          backgroundColor: 'transparent',
          borderColor: '#003050',
          label: 'Temperatura Mínima Permitida (°C)',
          borderWidth: 5,
          pointRadius: 0
        }, {
          data: [temperatures1[6], temperatures2[6], temperatures3[6], temperatures4[6]],
          backgroundColor: '#507090',
          label: 'Temperatura de Cada Incubadora (°C)',
        }]
      },
      options: {
        scales: {
          x: {
            title: {
              display: true,
              text: 'Incubadoras',
              font: {
                size: 16,
                weight: 'bold'
              }
            }
          },
          y: {
            min: min_random - 0.5,
            max: max_random + 0.5,
            title: {
              display: true,
              text: 'Temperatura (°C)',
              font: {
                size: 16,
                weight: 'bold'
              }
            },
            ticks: {
              stepSize: 1
            }
          }
        },
        plugins: {
          title: {
            display: true,
            text: 'Temperatura das Incubadoras (°C)',
            font: {
              size: 31
            },
            padding: 30
          },
          legend: optionsLegend
        }
      }
    }
  )

  //INCUBADORAS DISPONÍVEIS
  //Apesar de simularmos 4 incubadoras, simulamos também a situação que existem 8 incubadoras ao todo, porém apenas 4 em uso.
  var divIncubadorasUso = document.getElementById('incubadorasUso').getContext('2d');
  divIncubadorasUso.canvas.width = 1;
  divIncubadorasUso.canvas.height = 1;

  var graficoIncubadorasUso = new Chart(
    divIncubadorasUso,
    {
      type: 'pie',
      data: {
        labels: ['Livres', 'Em uso', 'Manutenção'],
        datasets: [{
          data: [3, 4, 1],
          backgroundColor: [
            '#19A7A8',
            '#003050',
            '#507090'
          ],
          label: 'Quantidade de Incubadoras'
        }]
      },
      options: {
        plugins: {
          title: {
            display: true,
            text: 'Incubadoras Disponíveis',
            font: {
              size: 31
            },
            padding: 30
          },
          legend: optionsLegend
        }
      }
    }
  )

  //GRÁFICO DOS BEBÊS COM RISCO
  var divBebesCritico = document.getElementById('bebesCritico').getContext('2d');
  divBebesCritico.canvas.width = 1;
  divBebesCritico.canvas.height = 1;

  var graficoBebesCritico = new Chart(
    divBebesCritico,
    {
      type: 'pie',
      data: {
        labels: ['Com Risco', 'Sem Risco'],
        datasets: [{
          data: [cont_riscoHiper + cont_riscoHipo, 4 - (cont_riscoHiper + cont_riscoHipo)],
          backgroundColor: [
            '#003050',
            '#19A7A8'
          ]
        }]
      },
      options: {
        plugins: {
          title: {
            display: true,
            text: 'Recém-Nascidos com Risco de Saúde',
            font: {
              size: 31
            },
            padding: 30
          },
          legend: optionsLegend
        }
      }
    }
  )

  //GRÁFICO DA PREMATURIDADE
  var divPrematuridade = document.getElementById('prematuridade').getContext('2d');
  divPrematuridade.canvas.width = 1;
  divPrematuridade.canvas.height = 1;

  var graficoPrematuridade = new Chart(
    divPrematuridade,
    {
      type: 'pie',
      data: {
        labels: ['Prematuro', 'Não Prematuro'],
        datasets: [{
          data: [1, 3],
          backgroundColor: [
            '#82FAF9',
            '#507090'
          ]
        }]
      },
      options: {
        plugins: {
          title: {
            display: true,
            text: 'Prematuridade',
            font: {
              size: 31
            },
            padding: 30
          },
          legend: optionsLegend
        }
      }
    }
  )

  //FECHAR O ALERTA EM VERMELHO
  function closeAlert() {
    var divAlert = document.getElementById('alerta');
    divAlert.style.display = 'none';
  }

  //BOTÃO PARA FAZER LOGOUT
  function sair() {
    window.location.href = "./login.html";
  }
</script>